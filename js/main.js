//* Music Base
const musicBase = [
    {
        author: "Xcho",
        musicName: "Ты и Я",
        album: "none",
        src: "./img/Xcho - Ты и Я.png",
        musicText: "Я был прав, но не счастлив \nРазбуди меня огнем \nМожет встать попытаться \nМожешь поделиться сном \n\nЭвридей перетяги \nДышу музыкой назло\nЯ тону в этой саге \nПока дымится нутро \n\nБере-береги мою любовь \nВпере-впереди моя душа \nЯ не перестал любить без слов \nХочу любоваться не спеша \n\nТолько ты и я \nПозабыли всех других \nТолько ты и я \nСкоро подарю круги \n\nВедь нас можно было вернуть \nПока не погасли звезды \nИ я только познал ту суть \nЧто для тебя мир мой создан \n\nВедь нас можно было вернуть \nПока не погасли звезды \nИ я только познал ту суть \nЧто для тебя мир мой создан \n\nЯ глушу тебя до дна \nВ моих объятьях одна \nДай мне огня \nДай мне, дай мне, дай мне \nДай мне влюбиться в тебя \n\nЭто мир не покорежен \nПока в ее глаза свет \nС тобой буду осторожен \nЯ отбросил этот бред \n\nИ весною с тобою \nМы встретимся опять \nНе спорю, закрою \nВсе дни что виноват \n\nПодержу тебя за руку \nЧтобы не улетела \nЯ был честен, детка \nЗнаешь меня, ты все видела \n\nВедь нас можно было вернуть \nПока не погасли звезды \nИ я только познал ту суть \nЧто для тебя мир мой создан \n\nВедь нас можно было вернуть \nПока не погасли звезды \nИ я только познал ту суть \nЧто для тебя мир мой создан"
    },
    {
        author: "Jony",
        musicName: "Koмeтa",
        album: "Комета",
        src: "./img/Jony - Koмeтa.jpg",
        musicText: "Все без тебя не так \nЛечу к тебе я, словно комета \nИ даже под дулом пистолета \nЯ найду тебя я, я найду тебя я \n\nВедь без тебя дико мне так \nТы просто подойди ко мне да \nЯ знаю, будет наше это лето \nВедь ты моя да, ведь ты моя да \n\nВсе, без тебя не так \nЛечу к тебе я словно комета \nИ даже под дулом пистолета \nЯ найду тебя я, я найду тебя я \n\nБуря мглою небо кроет \nВихри снежные крутя \nТо как зверь она завоет \nТо заплачет, как дитя \n\nИ если ты найдешь во мне Инь Янь \nОстанови это мучение \nВ тот миг, когда я потерял тебя \nТам вдали падала Луна \n\nВсе без тебя не так \nЛечу к тебе я, словно комета \nИ даже под дулом пистолета \nЯ найду тебя я, я найду тебя я \n\nВедь без тебя дико мне так \nТы просто подойди ко мне да \nЯ знаю, будет наше это лето \nВедь ты моя да, ведь ты моя да \n\nВсе, без тебя не так \nЛечу к тебе я словно комета \nИ даже под дулом пистолета \nЯ найду тебя я, я найду тебя я"
    },
    {
        author: "Qarakesak",
        musicName: "Қураған гүл",
        album: "2022",
        src: "./img/Qarakesak - Қураған гүл.jpg",
        musicText: "Батып кетем сені көрсем жүрегімнің түбіне \nТартасың өткен күннің түнімен \n\nТоңдырып тастаған өткен күнім \nҚурап солып қалды еккен гүлім \nӨткен баста ұйқысыз түнім \nТаңдар қайда еді төккен нұрын \nМұңға батып тағы да үміт үздім \nҰқсап қалды жүрегіне сіздің \nЖапырағына қураған күздің, қураған күздің \n\nМаған бер оны жылытып алам \nМаған бер оны жұбатып алам, қадірлейм \nҚабірге дейін \nБатып кетем сені көрсем жүрегімнің түбіне \nТартасың өткен күннің түнімен \n\nҚарап алып қарасам жүрегіме сөңген \nҚарамасам мүлде түсінбейм \nСен туралы жазып тастағым келді дәптерді зорлап \nҚарамасам қол жүрмейді \nЕске алу қиын болып кетті бейнеңді \nСені ойламайтын адамың мен едім \nҰмытып қалдым денеңді, деміңді \nАмал жоқ бәрі таусылып қалд \nЖүректердің іші қаусырап қалды \nДым қалмады рас дым қалмады \nАудиолар кері қайтып тыңдалмады \nКерек еттің дым болмады"
    },
    {
        author: "Alekseev",
        musicName: "Пьяное солнце",
        album: "2016",
        src: "./img/Alekseev - Пьяное солнце.jfif",
        musicText: "Я помнил всё и всё забыл, \nКого искал, кого любил, \nЯ проходил сквозь эти стены, \nЯ не хочу смотреть назад, \nГде пламенеющий закат, \nСебе и мне вскрывает вены. \n\nМимо нас, мимо нас - пьяное солнце, \nОно уйдёт и больше не вернется, \nНу что же ты молчишь, не поднимая глаз, \nМимо нас... \nМимо нас, мимо нас - люди или птицы, \n\Они летят, чтоб всё-таки разбиться, \nУбей меня потом, но только не сейчас, \nСейчас... \n\nЯ помнил всё и всё забыл, \nКаким я стал, каким я был, \nТак мало слов, так много пены, \nЯ не ищу в толпе твой взгляд, \nА пламенеющий закат, \nСебе и мне вскрывает вены. \n\nМимо нас, мимо нас - пьяное солнце, \nОно уйдёт и больше не вернется, \nНу что же ты молчишь, не поднимая глаз, \nМимо нас... \nМимо нас, мимо нас - люди или птицы, \n\Они летят, чтоб всё-таки разбиться, \nУбей меня потом, но только не сейчас, \nСейчас..." 
    },
    {
        author: "Ad Aka Dilovar",
        musicName: "Davae",
        album: "2021",
        src: "./img/Ad Aka Dilovar - Davae.jpg",
        musicText: "Тири задагит \nАхир расидак да нишон \nО дил сангаки ма \nФикрота кардан парешон \nКам кам изо мекашм \nРости да борат \nХонм, ваъдам доди, касам хурди \nГуфти катит мемонм \n\nЭ давае, дафшае \nДо того пастики \nНабинм рушае \nКади баркасти ки? Хо, ма дард дорм \nХо, ма алам дорм \nНагенма да бораш \nУже ҳамаша медонм \nБезор аз ишк шидм \nБезор аз ошиким кади \nГнахгор хдтиву \nГноха бори ки кади? \nЧону чигарм бди \nХдта девона кади \nДо того наздик бдем \n\nДевонавор ошиқи зор \nБе харду канор \nОҳть мор, ма безор \nМа таёр \nБдм ки чашм \nДардь танҳоида \nДа назарм кчое нарам \nДа барм хасти ть \nОдамчаи обуру дорм \nХози даст ба дасти \nПасти тьда надодаас зеб \nПастьт задан кадан фреб \nБар барем ягдигарда \nМысленно бехад дурем"
    },
    {
        author: "Rema",
        musicName: "Calm down",
        album: "2022",
        src: "./img/Rema - Calm down.jfif",
        musicText: "Baby, calm down, calm down \nGirl, this your body e put in my heart for lockdown, for lockdown \nGirl, you sweet like Fanta ooh, Fanta ooh \nIf I tell you, say, I love you, no dey form yanga oh, oh yanga oh \nNo tell me no, no, no, no, woah, woah, woah, woah \nBaby, come gimme your lo-lo-lo-lo-lo-lo-lo-lo-woah-woah-woah-woah \nYou got me like woah-woah-woah-woah-woah-woah-woah-woah-woah \nShawty come gimme your lo-lo-lo-lo-lo-lo-lo-lo-woah-woah-woah-woah \n\nI see this fine girl for my party she wear yellow \nEvery other girl they dey do too much but this girl mellow \nNaim I dey find situation I go use take tell am hello \nFinally I find way to talk to the girl but she no wan follow \nWho you come dey form for? (Mhmm) \nWhy you no wan' conform? (Mhmm) \nThen I start to feel her brown bum, warm (Mhmm) \nBut she dey gimme small, small woah \nI know say she sabi pass that one, one (Mhmm) \nBut she feeling insecure woah \n'Cause her friends go dey gum her like chewing gum (Mhmm) \nGo dey gum her like chewing gum, woah, woah, ooh \n\nBaby, calm down, calm down \nGirl, this your body e put in my heart for lockdown, for lockdown \nGirl, you sweet like Fanta ooh, Fanta ooh \nIf I tell you, say, \nI love you, no dey form yanga oh, oh yanga oh \nNo tell me no, no, no, no, woah, woah, woah, woah \nBaby, come gimme your lo-lo-lo-lo-lo-lo-lo-lo-woah-woah-woah-woah \nYou got me like woah-woah-woah-woah-woah-woah-woah-woah-woah \nShawty come gimme your lo-lo-lo-lo-lo-lo-lo-lo-woah-woah-woah-woah \n\nAs I reach my house I say, Make a rest small \nAs me I wake up na she dey my mind, oh-woah \nDay one, day two-wo, I no fit focus (I no fit focus) \nNa so me I call am, say make we link up (I say make we link up) \nAs I start to dey tell her how I feel now my heart dey race \nBaby girl if you leave me I no go love again \nBecause e get many girls wey put my heart for pain \nShebi you feel my pain? Yeah, yeah \n\nBaby, calm down, calm down \nGirl, this your body e put in my heart for lockdown, for lockdown \nGirl, you sweet like Fanta ooh, Fanta ooh \nIf I tell you, say, \nI love you, no dey form yanga oh, oh yanga oh \nNo tell me no, no, no, no, woah, woah, woah, woah \nBaby, come gimme your lo-lo-lo-lo-lo-lo-lo-lo-woah-woah-woah-woah \nYou got me like woah-woah-woah-woah-woah-woah-woah-woah-woah \nShawty come gimme your lo-lo-lo-lo-lo-lo-lo-lo-woah-woah-woah-woah"
    },
    {
        author: "Bakr",
        musicName: "Вредина",
        album: "2022",
        src: "./img/Bakr - Вредина.jpg",
        musicText: "А я найду тебя, где бы ты бы не была \nС кем бы ты бы не была, где бы не плыла \nСигаретным пеплом \nТы потушила ведь меня, вредина \nГде бы ты бы не была \nС кем бы ты бы не была, где бы не плыла \nСигаретным пеплом \nТы потушила ведь меня, вредина \n\nВ голове играет блюз \nНаверное это мой плюс \nУмножается пульс \nКогда на тебя смотрю \nПогляди на мир \nНепобедима ты \nДьявол темноты \nЯ так на тебя залип \n\nИ-и-и она мина \nБахнет анонимно \nОна вертит серый дым \nНаливая в бокал вина \nИ-и-и она мина \nБахнет анонимно \nОна пахнет как малина \n\nА я найду тебя, где бы ты бы не была \nС кем бы ты бы не была, где бы не плыла \nСигаретным пеплом \nТы потушила ведь меня, вредина \nГде бы ты бы не была \nС кем бы ты бы не была, где бы не плыла \nСигаретным пеплом \nТы потушила ведь меня, вредина \n\nСен алыстаганда менден менин журогум сокпойт \nСен кучактаганда мени менин журогум токтойт \nЖурогум оттой \nСен тарапка аны октойм \nМен тоголонуп тоголок топтой \nКеттим башкаларын тоготпой \nСендей жанды \nТабып алдым \nБул ааламдан \nЖылуу журогумо каттым сени гана, жана \nСендей жанды \nТабып алдым \nБул ааламдан \nЖылуу журогумо каттым \n\nИ-и-и она мина \nБахнет анонимно \nОна вертит серый дым \nНаливая в бокал вина \nИ-и-и она мина \nБахнет анонимно \nОна пахнет как малина \n\nА я найду тебя, где бы ты бы не была \nС кем бы ты бы не была, где бы не плыла \nСигаретным пеплом \nТы потушила ведь меня, вредина \nГде бы ты бы не была \nС кем бы ты бы не была, где бы не плыла \nСигаретным пеплом \nТы потушила ведь меня, вредина"

    },
    {
        author: "Jah Khalib",
        musicName: "Доча",
        album: "2022",
        src: "./img/Jah Khalib - Доча.jpg",
        musicText: "Что ты видишь в своих снах? \nТам наверное весна, \nИ плывут облака? \nВ твоих миленьких глазах \nИ, надеюсь, в твоих снах, \nГде-то рядом есть я, \nИ я одна из причин, по которой ты улыбаешься. \n\nКак это прекрасно быть отцом! \nКак это прекрасно быть отцом! \nСтою на земле, но невесом, \nЯ думаю: готов отдать тебе всё целиком. \nКогда я смотрю на твое лицо \nЯ пою: о, Боже, да! \nКак ты на меня похожа, да, \nЯ счастлив, когда ты тоже, да, \nВедь это чувство до дрожи… \n\nЧто ты видишь в своих снах? \nТам наверное весна, \nИ плывут облака? \nВ твоих миленьких глазах \nИ, надеюсь, в твоих снах, \nГде-то рядом есть я, \nИ я одна из причин, по которой ты улыбаешься. \n\nКак это прекрасно — быть отцом, особенно твоим \nЯ видел всю планету, но в тебе есть целый мир. \nТы еще не умеешь, но мы часто говорим \nС тобою нахожу себя другим \nИ я спускаюсь со сцены, и смываю грим \nПеред тобой без масок я верю, что любим \nПеред тобой я тот, кто я есть, золото теряет вес \nКогда мы лишь глазами говорим \nИз грубого, типичного брутала, наглеца, \nЯ превращаюсь в твоего миленького отца \nИ словно за мгновение пролетают месяца, \nВ тебе я постоянно наблюдаю чудеса \nИ пою: О, Боже, да! \nКак ты на меня похожа, да, \nЯ счастлив, когда ты тоже, да, \nВедь это чувство до дрожи… \n\nЧто ты видишь в своих снах? \nТам наверное весна, \nИ плывут облака? \nВ твоих миленьких глазах \nИ, надеюсь, в твоих снах, \nГде-то рядом есть я, \nИ я одна из причин, по которой ты улыбаешься."
    },
    {
        author: "Miyagi",
        musicName: "Samurai",
        album: "2020",
        src: "./img/Miyagi - Samurai.jpg",
        musicText: "Она пела мне песни про лето \nМеняла меня — меланхолика \nСветом была для пирата комета, летящая вдаль \nУмирали забытые кем-то \nИ трепетом ветра окутала разум \nИ я очарованный дикими пазлами гетто \nСам наломал тех дров, а художник слепо рисует сюжеты \n\nШироко шагали ноги, май, май, май \nНа тебя налюбоваться дай \nЗажигай мой рай, залипай-пай-пай \nСакура плакала, самурай \nЗарубил собак, дабы лай, лай, лай \nНе нарушил сон, не покоцал вайб \nБерегу покой, понимай-май-май \nЯ твой-ой-ой-ой \n\nЯ грезил тобою, мадам, если бы только видела \nДо неба рукою подать, любила ли ненавидела \nЯ бредил тобою, мадам, если бы только верила \nДо неба рукою достану, ради тебя намеренно \n(Я твой-ой-ой-ой) \n\nСтрог и груб, мол \nФерзь обут не по-доброму \nПерья прут и прут \nПонт убитый в кал \nОклемайся, ман \nТадади-тада \nФилки да молва \nСуки, липкий стаф, сто пудово там \nОн разбил себя подубитый в хлам \nЗазвездился малый, добром прикрыт \nВ голову стрелял, мол, но отскочил \nЕму повезло лишь, а так не айс \nЕго троллишь, троллишь Но на лай не лает \nИ готов всегда подходить с умом \nТы прикинь, сегодня сорил баблом \nОн такой-сякой, он богат и сыт \nОн не заслужил, там не по любви \nПрости за все это Родная, беги \n\nЯ грезил тобою, мадам, если бы только видела \nДо неба рукою подать, любила ли ненавидела \nЯ бредил тобою, мадам, если бы только верила \nДо неба рукою достану, ради тебя намеренно \n(Я твой-ой-ой-ой) \n\nЯ грезил тобою, мадам, если бы только видела \nДо неба рукою подать, любила ли ненавидела \nЯ бредил тобою, мадам, если бы только верила \nДо неба рукою достану, ради тебя намеренно \n(Я твой-ой-ой-ой)"
    },
    {
        author: "XXXTENTACION",
        musicName: "Hope",
        album: "2017",
        src: "./img/XXXTENTACION - Hope.jpg",
        musicText: "Yeah \nRest in peace to all \nThe kids that lost their lives in the \nParkland shooting, this song is dedicated to you \n\nOkay, she keep cryin', she keep cryin' every single night \nDay and night, on my mind, please don't kill the vibe \nOh no, I swear to God, I be in my mind \nSwear I wanna die, yeah, when you cross my— \nSaid I wanna die, yuh, no, I'm not alright, yuh \nI might start a riot, yuh, I'm so fuckin' tired, yuh \nSo what's up? What you say? Feelin' good, I'm feelin' great \nTired of the fuckin' hate, stackin' cheese all on my plate \n\nSo outside my misery, I think I'll find \nA way of envisioning a better life \nFor the rest of us, the rest of us \nThere's hope for the rest of us, the rest of us \n\nOkay, she keep cryin', she keep cryin' every single night \nDay and night, on my mind, please don't kill the vibe \nOh no, I swear to God, I be in my mind \nSwear I wanna die, yeah, when you cross my— \nSaid I wanna die, yuh, no, I'm not alright, yuh \nI might start a riot, yuh, I'm so fuckin' tired, yuh \nSo what's up? What you say? Feelin' good, I'm feelin' great \nTired of the fuckin' hate, stackin' cheese all on my plate"
    },
]

//! selectors 
const music_card = document.querySelector(".music-container-card");
const music = document.querySelector("#music");
const music_name = document.querySelector(".music-name");
const music_album = document.querySelector(".music-album");
const music_text = document.querySelector(".music-text");
const music_img = document.querySelector(".music-img");
const header = document.querySelector("header");
const hour = document.querySelector(".hour");
const day = document.querySelector(".day");
const rotateImg = document.querySelector(".img-album")
const pause = document.querySelector(".pause");
const next = document.querySelector(".next");
const prev = document.querySelector(".prev");
const progress = document.querySelector(".progress-bar");
const musicProgress = document.querySelector(".progress-cover")
const footer = document.querySelector(".footer");

//! data
function currentData () {
    const data = new Date();
    let week = [ "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
    let month = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
    let h = data.getHours();
    let m = data.getMinutes();
    h = checkTime(h);
    m = checkTime(m);
    hour.innerHTML = `${h} : ${m}`;
    day.innerHTML = `${week[data.getDay()]}, ${month[data.getMonth()]} ${data.getDate()}`;
    setTimeout(currentData, 1000);
} 

function checkTime (i) {
    if (i < 10){
        return "0" + i;
    }else {
        return i;
    }
}

music_card.innerHTML = musicBase.map((item) => {
    return (
        `
            <div class="music-card">
                <div class="music-card-img">
                    <img src="${item.src}" alt="${item.author} - ${item.musicName}">
                </div>
                <div class="music-data">
                    <p>${item.author}</p>
                    <h3>${item.musicName}</h3>
                    <p>Album: ${item.album},  #time</p>
                    <button type="button" class="music-btn">
                        <i class="fa-solid fa-music fa-beat-fade"></i>
                    </button>
                </div>
            </div>
        `
    );
}).join("");

const music_btn = document.querySelectorAll(".music-btn");

music_btn.forEach((item, index) => {
    item.addEventListener("click", () => {
        music.src = `./music/${musicBase[index].author} - ${musicBase[index].musicName}.mp3`;
        music.play();
        music_name.innerHTML = `${musicBase[index].author} - ${musicBase[index].musicName}`
        music_album.innerHTML = `Album: ${musicBase[index].album}`;
        music_text.innerHTML =`<pre>${musicBase[index].author} - ${musicBase[index].musicName}<br><br>${musicBase[index].musicText}
        </pre>`;
        music_img.src = musicBase[index].src;
        header.style.backgroundImage = `url("${musicBase[index].src}")`
        rotateImg.classList.add("active");
        pause.innerHTML = `<i class="fa-solid fa-pause"></i>`;
        let currentIndex = index;
        next.addEventListener("click", nextMusic)
        function nextMusic () {
            currentIndex++;
            if (currentIndex > musicBase.length - 1){
                currentIndex = 0;
            }
            music.src = `./music/${musicBase[currentIndex].author} - ${musicBase[currentIndex].musicName}.mp3`;
            music.play();
            music_name.innerHTML = `${musicBase[currentIndex].author} - ${musicBase[currentIndex].musicName}`
            music_album.innerHTML = `Album: ${musicBase[currentIndex].album}`;
            music_text.innerHTML =`<pre>${musicBase[currentIndex].author} - ${musicBase[currentIndex].musicName}<br><br>${musicBase[currentIndex].musicText}
            </pre>`;
            music_img.src = musicBase[currentIndex].src;
            header.style.backgroundImage = `url("${musicBase[currentIndex].src}")`
        }
        prev.addEventListener("click", () => {
            currentIndex--;
            if (currentIndex < 0){
                currentIndex = musicBase.length - 1;
            }
            music.src = `./music/${musicBase[currentIndex].author} - ${musicBase[currentIndex].musicName}.mp3`;
            music.play();
            music_name.innerHTML = `${musicBase[currentIndex].author} - ${musicBase[currentIndex].musicName}`
            music_album.innerHTML = `Album: ${musicBase[currentIndex].album}`;
            music_text.innerHTML =`<pre>${musicBase[currentIndex].author} - ${musicBase[currentIndex].musicName}<br><br>${musicBase[currentIndex].musicText}
            </pre>`;
            music_img.src = musicBase[currentIndex].src;
            header.style.backgroundImage = `url("${musicBase[currentIndex].src}")`
        })
        music.addEventListener("timeupdate",updateProgress)
        function updateProgress (e){
            const {duration , currentTime} = e.srcElement;
            const progressPercent = (currentTime / duration) * 100;
            progress.style.width = `${progressPercent}%`;
            if (duration === currentTime) {
                nextMusic();
            }
        }
        musicProgress.addEventListener("click", setProgress)
        function setProgress (e){
            const width = this.clientWidth;
            const clickX = e.offsetX;
            const duration = music.duration;
            music.currentTime = (clickX / width) * duration;
        }
    })
})

//! manage music
pause.addEventListener("click", () => {   
    let isAgree = rotateImg.classList.contains("active");
    if (isAgree) {
        pauseMusic();
    } else {
        playMusic();
    }
})

function playMusic () {
    rotateImg.classList.add("active");
    music.play();
    pause.innerHTML = `<i class="fa-solid fa-pause"></i>`;
}

function pauseMusic () {
    rotateImg.classList.remove("active");
    music.pause();
    pause.innerHTML = `<i class="fa-solid fa-play"></i>`;
}

//! footer
const currentYear = new Date;
footer.innerHTML = `&copy; Copyright Reserved ${currentYear.getFullYear()}`